<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" href="{{base_url}}assets/img/logo/AdminLTELogo.png">
  <title>QLab Admin</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="{{base_url}}assets/lte/plugins/fontawesome-free/css/all.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Tempusdominus Bootstrap 4 -->
  <link rel="stylesheet" href="{{base_url}}assets/lte/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
  <!-- iCheck -->
  <link rel="stylesheet" href="{{base_url}}assets/lte/plugins/icheck-bootstrap/icheck-bootstrap.min.css">
  <!-- JQVMap -->
  <link rel="stylesheet" href="{{base_url}}assets/lte/plugins/jqvmap/jqvmap.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="{{base_url}}assets/lte/dist/css/adminlte.min.css">
  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="{{base_url}}assets/lte/plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
  <!-- Daterange picker -->
  <link rel="stylesheet" href="{{base_url}}assets/lte/plugins/daterangepicker/daterangepicker.css">
  <!-- summernote -->
  <link rel="stylesheet" href="{{base_url}}assets/lte/plugins/summernote/summernote-bs4.min.css">

  <link rel="stylesheet" href="{{base_url}}assets/lte/plugins/select2/css/select2.min.css">
  <link rel="stylesheet" href="{{base_url}}assets/lte/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css">

  <link rel="stylesheet" href="{{base_url}}assets/lte/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
  <link rel="stylesheet" href="{{base_url}}assets/lte/plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
  <link rel="stylesheet" href="{{base_url}}assets/lte/plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
  <link rel="stylesheet" href="{{base_url}}assets/lte/plugins/icheck-bootstrap/icheck-bootstrap.min.css">

	<style>
    body {
      font-family: Arial, Helvetica, sans-serif;
    }

		.navbar-user-badge {
			padding: 2px 4px;
			position: absolute;
			right: 5px;
		}

    .select2-container .select2-selection--single {
        height: 100%!important;
    }
    .select2-container--default .select2-selection--single .select2-selection__arrow {
      height: 100%!important;
    }

    .swal2-actions > button {
      margin: 3%!important;
      width: 20%!important;
    }

    .container{
  width:400px;
  margin:0 auto;
}
.imageBox
{
    position: relative;
    height: 350px;
    width: 750px;
    border:1px solid #aaa;
    background: #fff;
    overflow: hidden;
    background-repeat: no-repeat;
    cursor:move;
}

/* .cropped
{
    height: 350px;
    width: 750px;
} */

.imageBox .thumbBox
{
    position: absolute;
    top: 30%;
    left: 14%;
    width: 738px;
    height: 339px;
    margin-top: -100px;
    margin-left: -100px;
    box-sizing: border-box;
    border: 1px solid rgb(102, 102, 102);
    box-shadow: 0 0 0 1000px rgba(0, 0, 0, 0.5);
    background: none repeat scroll 0% 0% transparent;
}

.imageBox .spinner
{
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    text-align: center;
    line-height: 400px;
    background: rgba(0,0,0,0.7);
}

	</style>
</head>

<body class="hold-transition sidebar-mini layout-fixed layout-navbar-fixed">
  <input hidden id="baseurl" value="{{base_url}}">
  <input hidden id="role-user" value="{{role}}">
	<div class="wrapper">
		{% include "admin/top_bar.html" %}
		<div class="content-wrapper">
			{% block content %} {% endblock %}
		</div>
		{% include "admin/footer.html" %}
	</div>
	<script src="{{base_url}}assets/lte/plugins/jquery/jquery.min.js"></script>
	<!-- jQuery UI 1.11.4 -->
	<script src="{{base_url}}assets/lte/plugins/jquery-ui/jquery-ui.min.js"></script>
	<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
	<script>
	  $.widget.bridge('uibutton', $.ui.button)
	</script>
	<!-- Bootstrap 4 -->
	<!-- <script src="{{base_url}}assets/lte/plugins/bootstrap/js/bootstrap.bundle.min.js"></script> -->
	<!-- ChartJS -->
	<script src="{{base_url}}assets/lte/plugins/chart.js/Chart.min.js"></script>
	<!-- Sparkline -->
	<script src="{{base_url}}assets/lte/plugins/sparklines/sparkline.js"></script>
	<!-- JQVMap -->
	<script src="{{base_url}}assets/lte/plugins/jqvmap/jquery.vmap.min.js"></script>
	<script src="{{base_url}}assets/lte/plugins/jqvmap/maps/jquery.vmap.usa.js"></script>
	<!-- jQuery Knob Chart -->
	<script src="{{base_url}}assets/lte/plugins/jquery-knob/jquery.knob.min.js"></script>
	<!-- daterangepicker -->
	<script src="{{base_url}}assets/lte/plugins/moment/moment.min.js"></script>
	<script src="{{base_url}}assets/lte/plugins/daterangepicker/daterangepicker.js"></script>
	<!-- Tempusdominus Bootstrap 4 -->
	<script src="{{base_url}}assets/lte/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
	<!-- Summernote -->
	<script src="{{base_url}}assets/lte/plugins/summernote/summernote-bs4.min.js"></script>
	<!-- overlayScrollbars -->
	<script src="{{base_url}}assets/lte/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
	<!-- AdminLTE App -->
	<script src="{{base_url}}assets/lte/dist/js/adminlte.js"></script>
	<!-- AdminLTE for demo purposes -->
	<script src="{{base_url}}assets/lte/dist/js/demo.js"></script>
	<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
	<script src="{{base_url}}assets/lte/dist/js/pages/dashboard.js"></script>

  <!-- jQuery -->
  <script src="{{base_url}}assets/lte/plugins/jquery/jquery.min.js"></script>
  <!-- Bootstrap 4 -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script> -->
  <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"></script> -->
  <script src="{{base_url}}assets/lte/plugins/bootstrap/js/bootstrap.js"></script>
  <script src="{{base_url}}assets/lte/plugins/bootstrap/js/bootstrap.bundle.js"></script>
  <script src="{{base_url}}assets/lte/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
  <!-- DataTables  & Plugins -->
  <script src="{{base_url}}assets/lte/plugins/datatables/jquery.dataTables.min.js"></script>
  <script src="{{base_url}}assets/lte/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
  <script src="{{base_url}}assets/lte/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
  <script src="{{base_url}}assets/lte/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
  <script src="{{base_url}}assets/lte/plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
  <script src="{{base_url}}assets/lte/plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
  <script src="{{base_url}}assets/lte/plugins/jszip/jszip.min.js"></script>
  <script src="{{base_url}}assets/lte/plugins/pdfmake/pdfmake.min.js"></script>
  <script src="{{base_url}}assets/lte/plugins/pdfmake/vfs_fonts.js"></script>
  <script src="{{base_url}}assets/lte/plugins/datatables-buttons/js/buttons.html5.min.js"></script>
  <script src="{{base_url}}assets/lte/plugins/datatables-buttons/js/buttons.print.min.js"></script>
  <script src="{{base_url}}assets/lte/plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
  <script src="{{base_url}}assets/lte/plugins/select2/js/select2.full.min.js"></script>
  <script src="{{base_url}}assets/lte/plugins/bootstrap-switch/js/bootstrap-switch.min.js"></script>
  <script src="{{base_url}}assets/lte/swal/swal.js"></script>
  <script>
  $( document ).ready(function() {

    var isadmin = localStorage.getItem('isadmin');
    if($('#role-user').val() == '10'){
      if (isadmin == null) {
          localStorage.setItem('isadmin', 1);
          Swal.fire({
            title: 'Login Berhasil',
            text: 'Selamat Datang,  {{name}}',
            icon: 'success',
            showConfirmButton: true,
            confirmButtonText: '<i class="fas fa-check"></i>',
            // timer: 2500
          });
        }
    }

    $('#logout-btn').on('click', function(){
      localStorage.clear();
    });


  // cekStatus(0);
  function cekStatus(param){

      $.ajax({
          type: 'post',
          dataType: 'json',
          url: 'hitungStatus',
          data : {
                  param      : param,
           },
          success: function(result){
            //user ---------
            var pesan_baru_user          = parseInt(result[0].total);
            var pesan_balas_admin   = parseInt(result[1].total);
            var pesan_dibaca_admin  = parseInt(result[3].total);
            var total_semua_user   = pesan_baru_user+pesan_balas_admin;
            $('#badge-total-user').html(total_semua_user);

            $('#total-pesan-baru-user').html(pesan_baru_user);
            $('#total-pesan-balasan-user').html(pesan_balas_admin);
            $('#badge-menu-total-user').html(total_semua_user);

            if(total_semua_user == 0){
              $('#badge-total-user').hide();
            }

            if(pesan_baru_user == 0 && pesan_balas_admin == 0){
              $('#badge-menu-total-user').hide();
            }

            //admin ---------
            var pesan_baru_admin   = parseInt(result[0].total);
            var pesan_balas_user   = parseInt(result[2].total);
            var pesan_dibaca_saya  = parseInt(result[3].total);
            var total_semua_admin  = pesan_baru_admin+pesan_balas_user;
            $('#badge-total-admin').html(total_semua_admin);

            $('#total-pesan-baru-admin').html(pesan_baru_admin);
            $('#total-pesan-dibalas-admin').html(pesan_balas_user);
            $('#badge-menu-pesan-admin').html(pesan_baru_admin);
            $('#badge-menu-balasan-admin').html(pesan_balas_user  + pesan_dibaca_saya);

            if(total_semua_admin == 0){
              $('#badge-total-admin').hide();
            }

            if(pesan_baru_admin == 0){
              $('#badge-menu-pesan-admin').hide();
            }

            if(pesan_balas_user == 0 && pesan_dibaca_saya == 0){
              $('#badge-menu-balasan-admin').hide();
            }


          }
        })
      };

    });
  </script>
	{% block js %}
   {% endblock %}

  {% if script %}
      <script src = "{{script}}"></script>
  {% endif %}
</body>
</html>
